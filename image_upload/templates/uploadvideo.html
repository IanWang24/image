{% extends 'base.html' %} {%block head_title %}上傳圖片{% endblock %} {% load static %}{% block content %}

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amatic+SC">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/headers/" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@700&display=swap" rel="stylesheet">
    <link rel=stylesheet href="{% static 'btn-start.css' %}">
    <link rel=stylesheet href="{% static 'Nar.css' %}">

    <style>
        body,
        html {
            height: 100%
        }

        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Segoe UI", sans-serif
        }

        header {
            font-family: 'Noto Serif TC', serif;
        }

        .menu {
            display: none
        }

        .w3-display-container {
            background-repeat: no-repeat;
            background-size: cover;
            background-image: url("{% static 'fish.gif' %}");
            min-height: 100%;
        }

        .w3-button {
            font-family: "Segoe UI", sans-serif;
            color: white;
            border: 2px solid #343A40;
            border-radius: .25rem;
            padding: .375rem .75rem;
        }

        .w3-border {
            border-width: thick;
        }

        /*上傳按鈕*/
        .btn {
            border: 10;
            background-color: #003C9D;
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
        }

        .btn:hover {
            color: #003C9D;
            background-color: #fff;
            border: 2px #003C9D solid;
            border-style: ridge;
        }


    </style>

</head>

<body>

    <!-- Narbar Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
        <symbol id="bootstrap" viewBox="0 0 118 94">
          <title>Bootstrap</title>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z"
          ></path>
        </symbol>
        <symbol id="home" viewBox="0 0 16 16">
          <path
            d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"
          />
        </symbol>
        <symbol id="speedometer2" viewBox="0 0 16 16">
          <path
            d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"
          />
          <path
            fill-rule="evenodd"
            d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"
          />
        </symbol>
        <symbol id="table" viewBox="0 0 16 16">
          <path
            d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"
          />
        </symbol>
        <symbol id="people-circle" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
          <path
            fill-rule="evenodd"
            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
          />
        </symbol>
        <symbol id="grid" viewBox="0 0 16 16">
          <path
          d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
          />
        </symbol>
      </svg>

    <!-- Narbar -->
    <header>
        <div class="px-3 py-2 bg-dark text-white fixed-top">
            <div class="container" style="padding-top:0px;">
                <div class="
                d-flex
                flex-wrap
                align-items-center
                justify-content-center justify-content-lg-start
              ">
                    <a href="http://127.0.0.1:8000/upload" class="
                  d-flex
                  align-items-center
                  my-2 my-lg-0
                  me-lg-auto
                  text-white text-decoration-none
                ">
                        <img class="titleimg,bi me-2" src="{% static 'fish.png' %}" alt="My image" width="15%" height="15%">
                        <h3 style="font-family: 'Noto Serif TC', serif;"><b>智慧養殖系統</b></h3>

                    </a>

                    <ul class="
                  nav
                  col-12 col-lg-auto
                  my-2
                  justify-content-center
                  my-md-0
                  text-small
                ">
                        <li>
                            <a href="#" class="nav-link text-white">
                                <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                      <use xlink:href="#home"/>
                    </svg> Home
                            </a>
                        </li>

                        <li>
                            <a href="#menu" class="nav-link text-white">
                                <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                      <use xlink:href="#grid" />
                    </svg> Detection
                            </a>
                        </li>

                        <li>
                            <a href="http://127.0.0.1:8000/display/#contact" class="nav-link text-white">
                                <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                      <use xlink:href="#table" />
                    </svg> Database
                            </a>
                        </li>

                        <!-- <li>
                  <a href="#" class="nav-link text-white">
                    <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                      <use xlink:href="#speedometer2" />
                    </svg>
                    Dashboard
                  </a>
                </li> -->

                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- 主畫面的gif-->
    <header class="w3-display-container w3-content" style="max-width:1550px" id="home" width=100% height=100%>
        <div class="w3-display-middle w3-center divstart">
            <span class="w3-text-white w3-hide-small little-title" style="font-size:15px;text-align:center;"><b>This is a system designed for manufacturers to trading fish fry . </b></span>
            <span class="w3-text-grey w3-hide-large w3-hide-medium " style="font-size:30px"><b></b></span>
            <a href="#menu">
                <p><span class="bg"></span><span class="base"></span><span class="text">Let's  Start !</span></p>
            </a>
        </div>
    </header>


    <!-- Detection -->
    <div class="w3-container w3-blue-grey w3-padding-100 w3-xxlarge" id="menu">
        <div class="w3-content">

            <h4 class="w3-center w3-jumbo" style="margin-bottom:30px"><b>偵測魚苗</b></h4>
            <div class="w3-row w3-center w3-border w3-border-dark-grey ">
                <a href="javascript:void(0)" onclick="openMenu(event, 'Upload');" id="myLink">
                    <div class="w3-col s6 tablink w3-padding-large w3-hover-blue " style="color: lightblue;">上傳圖檔</div>
                </a>
                <a href="javascript:void(0)" onclick="openMenu(event, 'Analysis');">
                    <div class="w3-col s6 tablink w3-padding-large w3-hover-blue" style="color: lightblue;">分析結果</div>
                </a>
            </div>

            <!-- 上傳圖片 -->
            <div id="Upload" class="w3-container menu w3-padding-32 w3-white">
                <form method="POST" class="post-form" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="mb-3">
                        <input class="form-control" type="file" name="video" accept="video/*">
                    </div>

                    <div class="input-group">
                        <span class="input-group-text"><b>影片描述</b></span>
                          <textarea class="form-control" name="caption" rows="3"></textarea>
                    </div>

                    <div class="d-grid gap-2 col-6 mx-auto" style="margin-top:20px">
                        <button type="submit" class="btn btn-lg">上傳</button>
                    </div>
                    <div class="col-3">
                        <p>
                            <h3><b>檔案路徑:</b></h3><a href="{{ video.video.url }}">{{ video.video.url }}</a></p>


                    </div>
                    <div class="w3-text-grey">
                        <video controls="" autoplay="" name="media">
                          <source src="{{ video.video.url }}" type="video/mp4">
                        </video>
                    </div>
                </form>
            </div>


            <!-- 分析模型結果 -->
            <div id="Analysis" class="w3-container menu w3-padding-32 w3-white">

                <table class="w3-center;" style="align-items: center;">
                    <tbody>
                        <tr>
                            <td><video controls="" autoplay="" name="media">
                            <source src="{{ video.after_predict.url }}" type="video/mp4">
                            </video></td>
                            <td></td>
                            <td class="w3-xxlarge">
                                <h1><b>魚苗數量</b> <span class="w3-tag w3-dark-grey w3-round" style="display:inline-flex;">{{video.quantity}}隻</span></h1>
                            </td>
                        </tr>

                    </tbody>
                </table>

            </div>

        </div>


    </div>

    <!-- 分析照片的table -->
    <script>
        // Tabbed Menu
        function openMenu(evt, menuName) {
            var i, x, tablinks;
            x = document.getElementsByClassName("menu");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < x.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" w3-blue", "");
            }
            document.getElementById(menuName).style.display = "block";
            evt.currentTarget.firstElementChild.className += " w3-blue";
        }
        document.getElementById("myLink").click();


    </script>


    <!-- Footer -->
    <footer class="w3-center w3-blue-grey w3-padding-48 w3-xxlarge">

    </footer>

</body>

</html>

{% endblock %}
